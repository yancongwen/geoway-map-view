webpackJsonp([1],{"77Ri":function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=i("7+uW"),a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("img",{attrs:{src:"static/images/logo.png",alt:"logo"}})])}]};var n=i("VU/8")({},a,!1,function(e){i("77Ri")},"data-v-463b161e",null).exports,s={props:["nodeList","activeId","checkable"],methods:{checkSublayer:function(e){e.collapsed=!e.collapsed},changeParentNodeChecked:function(e){this.nodeList.forEach(function(e){void 0!==e.items&&e.items.forEach(function(t){t.checked=e.checked})}),this.$emit("on-select-change",this.nodeList)},changeChildNodeChecked:function(e){this.nodeList.forEach(function(e){void 0!==e.items&&(e.checked=e.items.every(function(e){return e.checked}))}),this.$emit("on-select-change",this.nodeList)}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tree"},[i("div",{staticClass:"title"},[e._v("图层列表")]),e._v(" "),e._l(e.nodeList,function(t,c){return i("div",{key:c,staticClass:"project"},[e.checkable?i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"node.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:[function(i){var c=t.checked,a=i.target,n=!!a.checked;if(Array.isArray(c)){var s=e._i(c,null);a.checked?s<0&&e.$set(t,"checked",c.concat([null])):s>-1&&e.$set(t,"checked",c.slice(0,s).concat(c.slice(s+1)))}else e.$set(t,"checked",n)},e.changeParentNodeChecked]}}):e._e(),e._v(" "),i("label",{staticStyle:{display:"inline-block",height:"25px","line-height":"25px"},attrs:{title:t.name},on:{click:function(i){e.checkSublayer(t)}}},["folder"===t.type&&1==t.collapsed?i("img",{attrs:{src:"static/images/folder.png"}}):e._e(),e._v(" "),"folder"===t.type&&0==t.collapsed?i("img",{attrs:{src:"static/images/opened_folder.png"}}):e._e(),e._v(" "),"file"===t.type?i("img",{attrs:{src:"static/images/file.png"}}):e._e(),e._v(" "),i("span",[e._v(e._s(t.name))])]),e._v(" "),void 0!==t.items?i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.collapsed,expression:"node.collapsed==false"}],staticClass:"subproject"},e._l(t.items,function(t,c){return i("div",{key:c,staticClass:"subproject-item hover",class:t.id==e.activeId?"active":"",attrs:{title:t.name,name:t.name,id:t.id}},[e.checkable?i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:[function(i){var c=t.checked,a=i.target,n=!!a.checked;if(Array.isArray(c)){var s=e._i(c,null);a.checked?s<0&&e.$set(t,"checked",c.concat([null])):s>-1&&e.$set(t,"checked",c.slice(0,s).concat(c.slice(s+1)))}else e.$set(t,"checked",n)},e.changeChildNodeChecked]}}):e._e(),e._v(" "),i("label",{staticStyle:{display:"inline-block",height:"25px","line-height":"25px"},attrs:{for:c,title:t.name}},[i("img",{attrs:{src:"static/images/file.png"}}),e._v(" "),i("span",{attrs:{name:t.name}},[e._v(e._s(t.name))])])])})):e._e()])})],2)},staticRenderFns:[]};var o=i("VU/8")(s,r,!1,function(e){i("Oowk")},"data-v-8945e65e",null).exports,d=i("CXX0"),l=i("Mdwg"),h=i("ye7M"),v=i("clnH"),u=i("/LWt"),p=i("yGLh"),f=i("8cSO"),m=i("ItK/"),k=i("aUJj"),_={data:function(){return{actived:""}},props:["layerIds"],methods:{initMap:function(){var e=this.getLayers();this.map=new d.a({target:"map",layers:e,view:new d.b({projection:"EPSG:4326",center:[98.633,31.607],zoom:4,minZoom:2,maxZoom:14})}),this.drawSource=new f.a({wrapX:!1}),this.drawLayer=new m.a({source:this.drawSource,index:100}),this.map.addLayer(this.drawLayer)},getLayers:function(){var e=this,t=[];return["vec_c","eva_c","cva_c"].forEach(function(i){var c=e.getTdtlayer(i);t.push(c)}),t},getTdtlayer:function(e){for(var t="http://t0.tianditu.com/DataServer?T="+e+"&X={x}&Y={y}&L={z}",i=Object(p.d)("EPSG:4326"),c=[-180,-90,180,90],a=Object(u.E)(c)/512,n=new Array(16),s=0;s<16;++s)n[s]=a/Math.pow(2,s);var r=Object(u.C)(c),o=new l.a({visible:!1,extent:[-180,-90,180,90],source:new h.a({crossOrigin:"anonymous",tileUrlFunction:function(e){var i=e[0]+1,c=e[1],a=-e[2]-1,n=Math.pow(2,i+1);return(c%=n)*n<0&&(c+=n),t.replace("{z}",i.toString()).replace("{y}",a.toString()).replace("{x}",c.toString())},projection:i,tileGrid:new v.a({origin:r,resolutions:n,tileSize:256})})});return o.id=e,o},refreshMap:function(){var e=this.layerIds;this.map.getLayers().forEach(function(t){t.id&&(e.indexOf(t.id)>-1?t.setVisible(!0):t.setVisible(!1))})},addInteraction:function(e){this.actived=e,this.draw&&this.map.removeInteraction(this.draw),this.draw=new k.a({source:this.drawSource,type:e,freehand:!0}),this.map.addInteraction(this.draw)},clearLayer:function(){this.actived="",this.drawSource.clear()},clearDraw:function(){this.actived="",this.map.removeInteraction(this.draw)}},watch:{layerIds:function(){this.refreshMap()}},mounted:function(){this.initMap(),this.refreshMap()}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-wrap"},[i("div",{staticClass:"toolbar"},[i("div",{staticClass:"btn",on:{click:function(t){e.clearDraw()}}},[e._v("清除交互")]),e._v(" "),i("div",{staticClass:"btn",on:{click:function(t){e.clearLayer()}}},[e._v("清除图层")]),e._v(" "),i("div",{staticClass:"btn",class:{active:"Polygon"===e.actived},on:{click:function(t){e.addInteraction("Polygon")}}},[e._v("面标绘")]),e._v(" "),i("div",{staticClass:"btn",class:{active:"LineString"===e.actived},on:{click:function(t){e.addInteraction("LineString")}}},[e._v("线标绘")]),e._v(" "),i("div",{staticClass:"btn",class:{active:"Point"===e.actived},on:{click:function(t){e.addInteraction("Point")}}},[e._v("点标绘")])]),e._v(" "),i("div",{attrs:{id:"map"}})])},staticRenderFns:[]};var y={name:"App",data:function(){return{treeList:[{type:"folder",collapsed:!0,name:"天地图WMTS服务",checked:!1,items:[{id:"cva_c",type:"file",name:"中文地名注记",checked:!0},{id:"eva_c",type:"file",name:"英文地名注记",checked:!1},{id:"vec_c",type:"file",name:"底图",checked:!0}]}]}},methods:{getLayerIds:function(){var e=[];return this.treeList.forEach(function(t){t.items&&t.items.length>0&&t.items.forEach(function(t){t.checked&&e.push(t.id)})}),e},nodeSelectChange:function(e){}},components:{"v-header":n,"v-tree":o,"v-map":i("VU/8")(_,g,!1,function(e){i("jsIv")},"data-v-1eca71aa",null).exports}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("v-header"),this._v(" "),t("div",{staticClass:"main"},[t("div",{staticClass:"left"},[t("v-tree",{attrs:{nodeList:this.treeList,checkable:!0},on:{"on-select-change":this.nodeSelectChange}})],1),this._v(" "),t("div",{staticClass:"right"},[t("v-map",{attrs:{layerIds:this.getLayerIds()}})],1)])],1)},staticRenderFns:[]};var b=i("VU/8")(y,w,!1,function(e){i("ldot")},null,null).exports;i("ktr9");c.a.config.productionTip=!1,new c.a({el:"#app",components:{App:b},template:"<App/>"})},Oowk:function(e,t){},jsIv:function(e,t){},ktr9:function(e,t){},ldot:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bc944570acc01266276b.js.map