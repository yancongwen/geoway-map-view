webpackJsonp([1],{"AO+k":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("img",{attrs:{src:"static/images/logo.png",alt:"logo"}})])}]};var n=a("VU/8")({},c,!1,function(e){a("AO+k")},"data-v-463b161e",null).exports,s={props:["nodeList","activeId","checkable"],methods:{checkSublayer:function(e){e.collapsed=!e.collapsed},changeParentNodeChecked:function(e){this.nodeList.forEach(function(e){void 0!==e.items&&e.items.forEach(function(t){t.checked=e.checked})}),this.$emit("on-select-change",this.nodeList)},changeChildNodeChecked:function(e){this.nodeList.forEach(function(e){void 0!==e.items&&(e.checked=e.items.every(function(e){return e.checked}))}),this.$emit("on-select-change",this.nodeList)}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree"},[a("div",{staticClass:"title"},[e._v("图层列表")]),e._v(" "),e._l(e.nodeList,function(t,i){return a("div",{key:i,staticClass:"project"},[e.checkable?a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"node.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:[function(a){var i=t.checked,c=a.target,n=!!c.checked;if(Array.isArray(i)){var s=e._i(i,null);c.checked?s<0&&e.$set(t,"checked",i.concat([null])):s>-1&&e.$set(t,"checked",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(t,"checked",n)},e.changeParentNodeChecked]}}):e._e(),e._v(" "),a("label",{staticStyle:{display:"inline-block",height:"25px","line-height":"25px"},attrs:{title:t.name},on:{click:function(a){e.checkSublayer(t)}}},["folder"===t.type&&1==t.collapsed?a("img",{attrs:{src:"static/images/folder.png"}}):e._e(),e._v(" "),"folder"===t.type&&0==t.collapsed?a("img",{attrs:{src:"static/images/opened_folder.png"}}):e._e(),e._v(" "),"file"===t.type?a("img",{attrs:{src:"static/images/file.png"}}):e._e(),e._v(" "),a("span",[e._v(e._s(t.name))])]),e._v(" "),void 0!==t.items?a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.collapsed,expression:"node.collapsed==false"}],staticClass:"subproject"},e._l(t.items,function(t,i){return a("div",{key:i,staticClass:"subproject-item hover",class:t.id==e.activeId?"active":"",attrs:{title:t.name,name:t.name,id:t.id}},[e.checkable?a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:[function(a){var i=t.checked,c=a.target,n=!!c.checked;if(Array.isArray(i)){var s=e._i(i,null);c.checked?s<0&&e.$set(t,"checked",i.concat([null])):s>-1&&e.$set(t,"checked",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(t,"checked",n)},e.changeChildNodeChecked]}}):e._e(),e._v(" "),a("label",{staticStyle:{display:"inline-block",height:"25px","line-height":"25px"},attrs:{for:i,title:t.name}},[a("img",{attrs:{src:"static/images/file.png"}}),e._v(" "),a("span",{attrs:{name:t.name}},[e._v(e._s(t.name))])])])})):e._e()])})],2)},staticRenderFns:[]};var o=a("VU/8")(s,r,!1,function(e){a("uGyu")},"data-v-8945e65e",null).exports,l=a("CXX0"),d=a("Mdwg"),h=a("Umvz"),v=a("ye7M"),p=a("WMwB"),u=a("clnH"),f=a("aUJj"),m=a("/LWt"),k=a("yGLh"),g={data:function(){return{actived:""}},props:["layerIds"],methods:{initMap:function(){var e=this.getLayers();this.map=new l.a({target:"map",layers:e,view:new l.b({projection:"EPSG:4326",center:[98.633,31.607],zoom:4,minZoom:2,maxZoom:14})}),this.drawSource=new p.b({wrapX:!1}),this.drawLayer=new h.a({source:this.drawSource,index:100}),this.map.addLayer(this.drawLayer)},getLayers:function(){var e=this,t=[];return["vec_c","eva_c","cva_c"].forEach(function(a){var i=e.getTdtlayer(a);t.push(i)}),t},getTdtlayer:function(e){for(var t="http://t0.tianditu.com/DataServer?T="+e+"&X={x}&Y={y}&L={z}",a=Object(k.d)("EPSG:4326"),i=[-180,-90,180,90],c=Object(m.E)(i)/512,n=new Array(16),s=0;s<16;++s)n[s]=c/Math.pow(2,s);var r=Object(m.C)(i),o=new d.a({visible:!1,extent:[-180,-90,180,90],source:new v.a({crossOrigin:"anonymous",tileUrlFunction:function(e){var a=e[0]+1,i=e[1],c=-e[2]-1,n=Math.pow(2,a+1);return(i%=n)*n<0&&(i+=n),t.replace("{z}",a.toString()).replace("{y}",c.toString()).replace("{x}",i.toString())},projection:a,tileGrid:new u.a({origin:r,resolutions:n,tileSize:256})})});return o.id=e,o},refreshMap:function(){var e=this.layerIds;this.map.getLayers().forEach(function(t){t.id&&(e.indexOf(t.id)>-1?t.setVisible(!0):t.setVisible(!1))})},addInteraction:function(e){this.actived=e,this.draw&&this.map.removeInteraction(this.draw),this.draw=new f.a({source:this.drawSource,type:e,freehand:!0}),this.map.addInteraction(this.draw)},clearLayer:function(){this.drawSource.clear()},clearDraw:function(){this.actived="",this.map.removeInteraction(this.draw)}},watch:{layerIds:function(){this.refreshMap()}},mounted:function(){this.initMap(),this.refreshMap()}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-wrap"},[a("div",{staticClass:"toolbar"},[a("div",{staticClass:"btn clearfix",on:{click:function(t){e.clearDraw()}}},[a("span",{staticClass:"icon clear-draw"}),a("span",{staticClass:"text"},[e._v("清除交互")])]),e._v(" "),a("div",{staticClass:"btn clearfix",on:{click:function(t){e.clearLayer()}}},[a("span",{staticClass:"icon clear-layer"}),a("span",{staticClass:"text"},[e._v("清除图层")])]),e._v(" "),a("div",{staticClass:"btn clearfix",class:{active:"Polygon"===e.actived},on:{click:function(t){e.addInteraction("Polygon")}}},[a("span",{staticClass:"icon polygon"}),a("span",{staticClass:"text"},[e._v("面标绘")])]),e._v(" "),a("div",{staticClass:"btn clearfix",class:{active:"LineString"===e.actived},on:{click:function(t){e.addInteraction("LineString")}}},[a("span",{staticClass:"icon line"}),a("span",{staticClass:"text"},[e._v("线标绘")])]),e._v(" "),a("div",{staticClass:"btn clearfix",class:{active:"Point"===e.actived},on:{click:function(t){e.addInteraction("Point")}}},[a("span",{staticClass:"icon point"}),a("span",{staticClass:"text"},[e._v("点标绘")])])]),e._v(" "),a("div",{attrs:{id:"map"}})])},staticRenderFns:[]};var _={name:"App",data:function(){return{treeList:[{type:"folder",collapsed:!0,name:"天地图WMTS服务",checked:!1,items:[{id:"cva_c",type:"file",name:"中文地名注记",checked:!0},{id:"eva_c",type:"file",name:"英文地名注记",checked:!1},{id:"vec_c",type:"file",name:"底图",checked:!0}]}]}},methods:{getLayerIds:function(){var e=[];return this.treeList.forEach(function(t){t.items&&t.items.length>0&&t.items.forEach(function(t){t.checked&&e.push(t.id)})}),e},nodeSelectChange:function(e){}},components:{"v-header":n,"v-tree":o,"v-map":a("VU/8")(g,y,!1,function(e){a("hYRg")},"data-v-9a06d338",null).exports}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("v-header"),this._v(" "),t("div",{staticClass:"main"},[t("div",{staticClass:"left"},[t("v-tree",{attrs:{nodeList:this.treeList,checkable:!0},on:{"on-select-change":this.nodeSelectChange}})],1),this._v(" "),t("div",{staticClass:"right"},[t("v-map",{attrs:{layerIds:this.getLayerIds()}})],1)])],1)},staticRenderFns:[]};var C=a("VU/8")(_,w,!1,function(e){a("q+pB")},null,null).exports;a("ktr9");i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:C},template:"<App/>"})},hYRg:function(e,t){},ktr9:function(e,t){},"q+pB":function(e,t){},uGyu:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1fa34ce711303ad09d4d.js.map